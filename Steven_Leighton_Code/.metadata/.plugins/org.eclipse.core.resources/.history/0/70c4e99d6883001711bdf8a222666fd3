package com.bank.dao;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.bank.pojo.User;

public class TextDAO implements DAO{

	//filename for this application
	private final String filename = "src/com/bank/files/data.txt";
	
	@Override
	public void addUser(User user) {
		/*
		 * format: 
		 * 	-try with resources
		 *  -buffered writer -> File writer -> filename, true
		 *  -append user info with delimiter
		 *  
		 */
		
		try(BufferedWriter bw = new BufferedWriter(new FileWriter(filename, true))){
			
			String addLine = "";
			//iterate over user info, adding delimiter if not last item
			//delimiter is " | "
			List<String> info = user.getInfoAsStringList();
			for (String string : info) {
				addLine += string;
				if(info.indexOf(string) != info.size()-1) addLine += " | ";
			}
			
			//append to file
			bw.write(addLine);
			
			
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

	@Override
	public User getUser(int id) {
		
		return null;
	}

	@Override
	public void editUser(User user) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void deleteUser(int id) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public List<User> getUsers() {
		//final output will be added to this List
		List<User> users = new ArrayList<User>();
		
		/*
		 * try catch and read everything line by line
		 * creating a new user per line and adding it to list
		 */
		
		try(BufferedReader br = new BufferedReader(new FileReader(filename))){
			
			String line = null;
			while()
			
			
		} catch (FileNotFoundException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}
		
		return users;
	}
	
}
