<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

	<div id="navbar_view">Loading navbar...</div>
	<script src="../JS/navbar.js" type="text/javascript"></script>


	<div>
		<h3>Accounts</h3>
		<div id="accounts_table"></div>
	</div>

	<script type="text/javascript">
		window.onload = function() {
			getAccountInformation();
		}

		function getAccountInformation() {
			var xhr = new XMLHttpRequest();
			xhr.onreadystatechange = function() {
				alert(xhr.status);
				if (xhr.readyState == 4 && xhr.status == 200) {
					console.log(xhr.responseText);
					var accounts = dto.accounts;
					
					alert(accounts);
					
					if (accounts.length == 0) {
						document.getElementById("accounts").style.visibility = "hidden";
						console.log("null");
						console.log("accounts");
					} else {
						console.log("not null");
						console.log(accounts.length);
						populateAccountsTable(accounts);
					}
				}
			}
			xhr.open("GET", "../getUserInfo", true);
			xhr.send();

		}

		function populateAccountsTable(accounts) {
			var html = "";

			// Table head
			html += "<table class='table table-striped'><thead>	"
					+ "<th>ID</th>" + "<th>Date opened</th>" + "<th>Level</th>"
					+ "<th>Type</th>" + "<th>Balance</th><tbody>";

			// Table rows
			for (var i = 0; i < accounts.length; i++) {
				console.log("Account index " + i + ": " + account);
				var day = accounts[i].accountOpenedDate;
				html += "<tr>"
				html += "<td>" + accounts[i].accountId + "</td>";
				html += "<td>" + day.month + " " + day.dayOfMonth + ", "
						+ day.year + "</td>";
				html += "<td>" + accounts[i].level + "</td>";
				html += "<td>" + accounts[i].type + "</td>";
				html += "<td>" + accounts[i].balance + "</td>";
				html += "</tr>";
			}

			// Table end
			html += "</tbody></thead></table>";

			document.getElementById('accounts_table').innerHTML = html;
		}
	</script>


</body>
</html>