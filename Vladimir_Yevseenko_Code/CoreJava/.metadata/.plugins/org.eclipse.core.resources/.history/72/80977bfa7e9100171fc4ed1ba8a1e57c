package com.revature.utils;

import java.io.FileReader;
import java.sql.Connection;
import java.sql.DriverManager;
import java.util.Properties;

import org.apache.log4j.Logger;

import com.revature.logging.Logging;

public class ConnectionFactory {
	private static Logger log;
	private static ConnectionFactory instance;
	
	private ConnectionFactory() {
		log = Logging.getLogger();
	}
	
	public static ConnectionFactory getInstance() {
		log.debug("ConnectionFactory getInstace()");
		if (instance == null)
			instance = new ConnectionFactory();
		return instance;
	}
	
	
	public Connection getConnection() {
		log.deub("ConnectionFactory getConnection()");
		try {
			Properties prop = new Properties();
			prop.load(new FileReader("src/com/rev/utils/database.properties"));
			dbConn = DriverManager.getConnection(prop.getProperty("url"),
					prop.getProperty("usr"), prop.getProperty("pw"));
			log.info("DBDAO instance created");
		} catch (Exception ex) {
			log.fatal("Unable to create DBDAO instance");
			log.fatal(ex.getMessage());
		}
	}
}
