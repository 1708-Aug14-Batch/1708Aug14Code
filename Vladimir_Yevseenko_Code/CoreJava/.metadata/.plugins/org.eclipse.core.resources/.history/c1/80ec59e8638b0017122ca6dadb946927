package com.bank.main;

import java.util.Scanner;

import com.bank.pojos.AccountType;
import com.bank.service.BankService;

public class Driver {
	static Scanner scanner = new Scanner(System.in);
	static BankService service = new BankService();
	
	public static void main(String[] args) {
		boolean running = true;
		
		while (running) {
			System.out.println("Select an option:");
			System.out.println("(1) login, (2) create user");
			switch (scanner.nextLine()) {
				case "1": login(); break;
				case "2": createAcc(); break;
				default: System.out.println("Invalid choice.\n");
			}
		}
	}
	
	
	public static void login() {
		System.out.print("\nEnter email: ");
		String email = scanner.nextLine();
		System.out.print("Enter password: ");
		String pw = scanner.nextLine();
		
		if (service.attemptLogin(email, pw)) {
			System.out.println("\nLogin succesful\n");
			accountChoices();
		} else {
			System.out.println("Invalid email/password\n");
		}
	}
	
	public static void createAcc() {
		System.out.print("\nEnter first name: ");
		String fn = scanner.nextLine();
		System.out.print("Enter last name: ");
		String ln = scanner.nextLine();
		System.out.print("Enter email: ");
		String email = scanner.nextLine();
		System.out.print("Enter password: ");
		String pw = scanner.nextLine();
		
		if (service.createNewUser(fn, ln, email, pw))
			System.out.println("User successfully created\n");
		else
			System.out.println("Email already in use\n");
	}
	
	public static void accountChoices() {
		System.out.println("Select an option");
		System.out.println("(1) select existing account (2) create new account");
		switch (scanner.nextLine()) {
			case "1": accountSelect(); break;
			case "2": accountCreate(); break;
			default: System.out.println("Invalid choice\n");
		}
	}
	
	public static void accountSelect() {
		System.out.println("Select account type");
		System.out.println("(1) Checking (2) Savings (3) Credit");
		String choice = scanner.nextLine();
		switch (choice) {
			case "1":
			case "2":
			case "3": service.selectAccount(AccountType.get(Integer.parseInt(choice)));
					accountActions();
			default: System.out.println("Invalid choice\n");
		}
	}
}
