package com.bank.service;

import java.util.ArrayList;

import com.bank.dao.*;
import com.bank.pojos.Account;
import com.bank.pojos.Person;
import com.bank.pojos.User;

public class Service {
	
	DAO daoImpl = new DaoTextImpl();
	
	public Account validateUser(String username, String password) {
		
		User guy = daoImpl.readUser(username);
		
		if (guy == null)
			return null;
		
		if (guy.getAccount().isDeleted()) {
			System.out.println("This account has been deleted.");
			return null;
		}
		
		if (guy.getAccount().getPassword().equals(password))
			return guy.getAccount();
		else return null;
	}
	
	public boolean isEmailAvailable(String email) {
		
		ArrayList<Person> peopleList = daoImpl.getAllPersons();
		
		for (Person guy : peopleList)
			if (guy.getEmail().equals(email))
				return false;
		
		return true;
	}
	// Always check whether the user has been deleted

}
