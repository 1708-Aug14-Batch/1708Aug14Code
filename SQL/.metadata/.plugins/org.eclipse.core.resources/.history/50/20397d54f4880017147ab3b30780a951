package com.example.dao;

import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.Types;

import com.example.util.ConnectionFactory;

public class DaoImpl {
	
	// Callable Statement
	
	public int getId(String name) {
		Connection connect = null;
		CallableStatement cs = null;
		int id = 0;
		
		try {
			connect = ConnectionFactory.getInstance().getConnection();
			
			String sql = "{ ? = call findPerson(?) }";
			cs = connect.prepareCall(sql);
			cs.registerOutParameter(1, Types.NUMERIC);
			cs.setString(2, name);
			cs.execute();
		}
		catch (SQLException e) {
			e.printStackTrace();
		}
		finally {
			cs.close();
			connect.close();
		}
		
		return id;
	}

}
